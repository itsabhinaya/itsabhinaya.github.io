var data_all = 
[
  {
    "city": "Indianapolis",
    "includes": "Fishers, Carmel, Noblesville, Westfield, Zionsville",
    "state": "Indiana",
    "latitude": 39.775092,
    "longitude": -86.13216,
    "radius": 15.3,
    "fillKey": "green",
    "overall_rankings": 8,
    "startup": 6,
    "resources": 12,
    "demographics": 10
  },
  {
    "city": "Columbus",
    "includes": 0,
    "state": "Ohio",
    "latitude": 40.040113,
    "longitude": -82.897222,
    "radius": 15.7,
    "fillKey": "green",
    "overall_rankings": 7,
    "startup": 8,
    "resources": 9,
    "demographics": 13
  },
  {
    "city": "Detroit",
    "includes": "Warren, Sterling Heights, Troy and Livonia",
    "state": "Michigan",
    "latitude": 42.239933,
    "longitude": -83.150823,
    "radius": 13.3,
    "fillKey": "blue",
    "overall_rankings": 14,
    "startup": 29,
    "resources": 11,
    "demographics": 30
  },
  {
    "city": "Milwaukee",
    "includes": 0,
    "state": "Wisconsin",
    "latitude": 43.011264,
    "longitude": -87.958409,
    "radius": 14.7,
    "fillKey": "green",
    "overall_rankings": 10,
    "startup": 7,
    "resources": 8,
    "demographics": 40
  },
  {
    "city": "Kansas City",
    "includes": "Olathe, Kansas City, Independence, Overland Park",
    "state": "Missouri",
    "latitude": 39.102404,
    "longitude": -94.598583,
    "radius": 14,
    "fillKey": "blue",
    "overall_rankings": 12,
    "startup": 15,
    "resources": 13,
    "demographics": 29
  },
  {
    "city": "Omaha",
    "includes": 0,
    "state": "Nebraska",
    "latitude": 41.291736,
    "longitude": -96.171104,
    "radius": 13.7,
    "fillKey": "blue",
    "overall_rankings": 13,
    "startup": 11,
    "resources": 14,
    "demographics": 21
  },
  {
    "city": "Cleveland",
    "includes": "Akron",
    "state": "Ohio",
    "latitude": 41.523401,
    "longitude": -81.599648,
    "radius": 16.3,
    "fillKey": "green",
    "overall_rankings": 5,
    "startup": 5,
    "resources": 7,
    "demographics": 38
  },
  {
    "city": "Minneapolis",
    "includes": "Saint Paul",
    "state": "Minnesota",
    "latitude": 44.979265,
    "longitude": -93.273024,
    "radius": 17.3,
    "fillKey": "green",
    "overall_rankings": 2,
    "startup": 2,
    "resources": 2,
    "demographics": 48
  },
  {
    "city": "Wichita",
    "includes": 0,
    "state": "Kansas",
    "latitude": 37.651974,
    "longitude": -97.258997,
    "radius": 9.7,
    "fillKey": "blue",
    "overall_rankings": 25,
    "startup": 16,
    "resources": 36,
    "demographics": 18
  },
  {
    "city": "St. Louis",
    "includes": 0,
    "state": "Missouri",
    "latitude": 38.631501,
    "longitude": -90.19231,
    "radius": 16,
    "fillKey": "green",
    "overall_rankings": 6,
    "startup": 39,
    "resources": 4,
    "demographics": 16
  },
  {
    "city": "Cincinnati",
    "includes": "Covington, KY",
    "state": "Ohio",
    "latitude": 39.166759,
    "longitude": -84.53822,
    "radius": 16.7,
    "fillKey": "green",
    "overall_rankings": 4,
    "startup": 4,
    "resources": 5,
    "demographics": 19
  },
  {
    "city": "Toledo",
    "includes": 0,
    "state": "Ohio",
    "latitude": 41.720684,
    "longitude": -83.569359,
    "radius": 5,
    "fillKey": "purple",
    "overall_rankings": 41,
    "startup": 45,
    "resources": 34,
    "demographics": 31
  },
  {
    "city": "Fort Wayne",
    "includes": 0,
    "state": "Indiana",
    "latitude": 41.093763,
    "longitude": -85.070713,
    "radius": 8.7,
    "fillKey": "purple",
    "overall_rankings": 28,
    "startup": 42,
    "resources": 32,
    "demographics": 2
  },
  {
    "city": "Lincoln",
    "includes": 0,
    "state": "Nebraska",
    "latitude": 40.865142,
    "longitude": -96.823133,
    "radius": 12,
    "fillKey": "blue",
    "overall_rankings": 18,
    "startup": 37,
    "resources": 15,
    "demographics": 28
  },
  {
    "city": "Des Moines",
    "includes": 0,
    "state": "Iowa",
    "latitude": 41.672687,
    "longitude": -93.572173,
    "radius": 9.3,
    "fillKey": "purple",
    "overall_rankings": 26,
    "startup": 47,
    "resources": 21,
    "demographics": 25
  },
  {
    "city": "Springfield",
    "includes": 0,
    "state": "Missouri",
    "latitude": 39.820839,
    "longitude": -89.598978,
    "radius": 5.3,
    "fillKey": "purple",
    "overall_rankings": 38,
    "startup": 30,
    "resources": 50,
    "demographics": 1
  },
  {
    "city": "Grand Rapids",
    "includes": 0,
    "state": "Michigan",
    "latitude": 42.984226,
    "longitude": -85.629101,
    "radius": 12.3,
    "fillKey": "blue",
    "overall_rankings": 17,
    "startup": 14,
    "resources": 25,
    "demographics": 4
  },
  {
    "city": "Sioux Falls",
    "includes": 0,
    "state": "South Dakota",
    "latitude": 43.546358,
    "longitude": -96.69063,
    "radius": 5,
    "fillKey": "purple",
    "overall_rankings": 45,
    "startup": 33,
    "resources": 45,
    "demographics": 36
  },
  {
    "city": "Rockford",
    "includes": 0,
    "state": "Illinois",
    "latitude": 42.33342,
    "longitude": -89.157198,
    "radius": 5,
    "fillKey": "purple",
    "overall_rankings": 50,
    "startup": 50,
    "resources": 49,
    "demographics": 20
  },
  {
    "city": "Dayton",
    "includes": 0,
    "state": "Ohio",
    "latitude": 39.750471,
    "longitude": -84.268593,
    "radius": 11,
    "fillKey": "blue",
    "overall_rankings": 21,
    "startup": 19,
    "resources": 19,
    "demographics": 32
  },
  {
    "city": "Topeka",
    "includes": 0,
    "state": "Kansas",
    "latitude": 38.988075,
    "longitude": -95.780662,
    "radius": 5,
    "fillKey": "purple",
    "overall_rankings": 52,
    "startup": 52,
    "resources": 47,
    "demographics": 27
  },
  {
    "city": "Cedar Rapids",
    "includes": 0,
    "state": "Iowa",
    "latitude": 41.976612,
    "longitude": -91.657578,
    "radius": 5,
    "fillKey": "purple",
    "overall_rankings": 48,
    "startup": 48,
    "resources": 38,
    "demographics": 43
  },
  {
    "city": "Evansville",
    "includes": 0,
    "state": "Indiana",
    "latitude": 37.997128,
    "longitude": -87.574963,
    "radius": 7,
    "fillKey": "purple",
    "overall_rankings": 33,
    "startup": 43,
    "resources": 44,
    "demographics": 5
  },
  {
    "city": "Springfield",
    "includes": 0,
    "state": "Illinois",
    "latitude": 37.25807,
    "longitude": -93.343673,
    "radius": 5,
    "fillKey": "purple",
    "overall_rankings": 51,
    "startup": 51,
    "resources": 43,
    "demographics": 35
  },
  {
    "city": "Peoria",
    "includes": 0,
    "state": "Illinois",
    "latitude": 40.693137,
    "longitude": -89.589847,
    "radius": 5,
    "fillKey": "purple",
    "overall_rankings": 44,
    "startup": 31,
    "resources": 37,
    "demographics": 51
  },
  {
    "city": "Lansing",
    "includes": "East Lansing",
    "state": "Michigan",
    "latitude": 42.599184,
    "longitude": -84.371973,
    "radius": 7.7,
    "fillKey": "purple",
    "overall_rankings": 31,
    "startup": 49,
    "resources": 30,
    "demographics": 15
  },
  {
    "city": "Ann Arbor",
    "includes": 0,
    "state": "Michigan",
    "latitude": 42.266638,
    "longitude": -83.849042,
    "radius": 14.3,
    "fillKey": "blue",
    "overall_rankings": 11,
    "startup": 9,
    "resources": 10,
    "demographics": 47
  },
  {
    "city": "Columbia",
    "includes": 0,
    "state": "Missouri",
    "latitude": 38.894165,
    "longitude": -92.274145,
    "radius": 6,
    "fillKey": "purple",
    "overall_rankings": 36,
    "startup": 44,
    "resources": 28,
    "demographics": 39
  },
  {
    "city": "Rochester",
    "includes": 0,
    "state": "Minnesota",
    "latitude": 44.075285,
    "longitude": -92.516916,
    "radius": 5,
    "fillKey": "purple",
    "overall_rankings": 43,
    "startup": 41,
    "resources": 31,
    "demographics": 50
  },
  {
    "city": "Fargo",
    "includes": 0,
    "state": "North Dakota",
    "latitude": 46.92536,
    "longitude": -96.990615,
    "radius": 10.7,
    "fillKey": "blue",
    "overall_rankings": 22,
    "startup": 17,
    "resources": 18,
    "demographics": 42
  },
  {
    "city": "Green Bay",
    "includes": 0,
    "state": "Wisconsin",
    "latitude": 44.494385,
    "longitude": -87.976051,
    "radius": 6.3,
    "fillKey": "purple",
    "overall_rankings": 35,
    "startup": 25,
    "resources": 46,
    "demographics": 12
  },
  {
    "city": "Flint",
    "includes": 0,
    "state": "Michigan",
    "latitude": 42.965926,
    "longitude": -83.780835,
    "radius": 5,
    "fillKey": "purple",
    "overall_rankings": 49,
    "startup": 36,
    "resources": 52,
    "demographics": 9
  },
  {
    "city": "South Bend",
    "includes": "Elkhart",
    "state": "Indiana",
    "latitude": 41.673383,
    "longitude": -86.251654,
    "radius": 10.3,
    "fillKey": "blue",
    "overall_rankings": 23,
    "startup": 12,
    "resources": 39,
    "demographics": 11
  },
  {
    "city": "Quad Cities",
    "includes": "Davenport, Bettendorf, Rock Island, East Moline and Moline",
    "state": "Iowa",
    "latitude": 41.516667,
    "longitude": -90.533333,
    "radius": 5,
    "fillKey": "purple",
    "overall_rankings": 46,
    "startup": 22,
    "resources": 51,
    "demographics": 33
  },
  {
    "city": "Lafayette",
    "includes": "West Lafayette",
    "state": "Indiana",
    "latitude": 40.39905,
    "longitude": -86.830286,
    "radius": 11.3,
    "fillKey": "blue",
    "overall_rankings": 20,
    "startup": 24,
    "resources": 22,
    "demographics": 3
  },
  {
    "city": "Bloomington",
    "includes": 0,
    "state": "Indiana",
    "latitude": 40.462041,
    "longitude": -88.850396,
    "radius": 10,
    "fillKey": "blue",
    "overall_rankings": 24,
    "startup": 46,
    "resources": 23,
    "demographics": 7
  },
  {
    "city": "Madison",
    "includes": 0,
    "state": "Wisconsin",
    "latitude": 43.06956,
    "longitude": -89.423861,
    "radius": 15,
    "fillKey": "green",
    "overall_rankings": 9,
    "startup": 13,
    "resources": 6,
    "demographics": 52
  },
  {
    "city": "Champaign",
    "includes": "Urbana",
    "state": "Illinois",
    "latitude": 40.101777,
    "longitude": -88.197166,
    "radius": 12.7,
    "fillKey": "blue",
    "overall_rankings": 16,
    "startup": 23,
    "resources": 16,
    "demographics": 17
  },
  {
    "city": "Iowa City",
    "includes": 0,
    "state": "Iowa",
    "latitude": 41.648207,
    "longitude": -91.541579,
    "radius": 9,
    "fillKey": "purple",
    "overall_rankings": 27,
    "startup": 18,
    "resources": 24,
    "demographics": 45
  },
  {
    "city": "Ames",
    "includes": 0,
    "state": "Iowa",
    "latitude": 42.037879,
    "longitude": -93.600254,
    "radius": 7.3,
    "fillKey": "purple",
    "overall_rankings": 32,
    "startup": 20,
    "resources": 33,
    "demographics": 46
  },
  {
    "city": "State College",
    "includes": 0,
    "state": "Pennsylvania",
    "latitude": 40.881935,
    "longitude": -77.867822,
    "radius": 8,
    "fillKey": "purple",
    "overall_rankings": 30,
    "startup": 34,
    "resources": 27,
    "demographics": 41
  },
  {
    "city": "Athens",
    "includes": 0,
    "state": "Ohio",
    "latitude": 39.339279,
    "longitude": -82.013803,
    "radius": 8.3,
    "fillKey": "purple",
    "overall_rankings": 29,
    "startup": 38,
    "resources": 20,
    "demographics": 49
  },
  {
    "city": "Bloomington",
    "includes": "Normal",
    "state": "Illinois",
    "latitude": 39.07881,
    "longitude": -86.435094,
    "radius": 5,
    "fillKey": "purple",
    "overall_rankings": 42,
    "startup": 35,
    "resources": 35,
    "demographics": 44
  },
  {
    "city": "Lexington",
    "includes": 0,
    "state": "Kentucky",
    "latitude": 38.016674,
    "longitude": -84.486043,
    "radius": 11.7,
    "fillKey": "blue",
    "overall_rankings": 19,
    "startup": 27,
    "resources": 17,
    "demographics": 24
  },
  {
    "city": "Louisvillle",
    "includes": 0,
    "state": "Kentucky",
    "latitude": 38.188962,
    "longitude": -85.676819,
    "radius": 13,
    "fillKey": "blue",
    "overall_rankings": 15,
    "startup": 10,
    "resources": 26,
    "demographics": 6
  },
  {
    "city": "Bowling Green",
    "includes": 0,
    "state": "Kentucky",
    "latitude": 37.017407,
    "longitude": -86.451752,
    "radius": 5,
    "fillKey": "purple",
    "overall_rankings": 47,
    "startup": 53,
    "resources": 42,
    "demographics": 8
  },
  {
    "city": "Eau Claire",
    "includes": 0,
    "state": "Wisconsin",
    "latitude": 44.75653,
    "longitude": -91.473097,
    "radius": 5.7,
    "fillKey": "purple",
    "overall_rankings": 37,
    "startup": 32,
    "resources": 41,
    "demographics": 26
  },
  {
    "city": "Duluth",
    "includes": 0,
    "state": "Minesota",
    "latitude": 47.005566,
    "longitude": -92.001934,
    "radius": 6.7,
    "fillKey": "purple",
    "overall_rankings": 34,
    "startup": 40,
    "resources": 29,
    "demographics": 37
  },
  {
    "city": "Wheeling",
    "includes": 0,
    "state": "West Virginia",
    "latitude": 40.102703,
    "longitude": -80.647599,
    "radius": 5,
    "fillKey": "purple",
    "overall_rankings": 53,
    "startup": 28,
    "resources": 53,
    "demographics": 14
  },
  {
    "city": "Youngstown",
    "includes": 0,
    "state": "Ohio",
    "latitude": 41.017082,
    "longitude": -80.802854,
    "radius": 5,
    "fillKey": "purple",
    "overall_rankings": 40,
    "startup": 21,
    "resources": 48,
    "demographics": 22
  },
  {
    "city": "Erie",
    "includes": 0,
    "state": "Pennsylvania",
    "latitude": 42.087337,
    "longitude": -80.087341,
    "radius": 5,
    "fillKey": "purple",
    "overall_rankings": 39,
    "startup": 26,
    "resources": 40,
    "demographics": 34
  },
  {
    "city": "Pittsburgh",
    "includes": 0,
    "state": "Pennsylvania",
    "latitude": 40.434436,
    "longitude": -80.024817,
    "radius": 17,
    "fillKey": "green",
    "overall_rankings": 3,
    "startup": 3,
    "resources": 3,
    "demographics": 23
  },
  {
    "city": "Chicago",
    "includes": "Evanston, Aurora, Joliet, Elgin, Naperville",
    "state": "Illinois",
    "latitude": 41.928881,
    "longitude": -87.81381,
    "radius": 17.7,
    "fillKey": "green",
    "overall_rankings": 1,
    "startup": 1,
    "resources": 1,
    "demographics": 53
  }
]
var map = new Datamap({
  element: document.getElementById('map_container'),
  responsive: true,
  scope: 'usa',
  // projection: 'albersUsa',
  setProjection: function(element) {
    var projection = d3.geo.albersUsa()
    // .center([-75, 40])
    // .rotate([0, 0])
    .scale(element.offsetWidth*2.5)
    .translate([element.offsetWidth / 2.7, element.offsetHeight*.8]);
    // .translate([90,260]);
    var path = d3.geo.path()
    .projection(projection);

    return {path: path, projection: projection};
  },
  geographyConfig: {
    // dataUrl: ,
    highlightOnHover: false,
    popupOnHover: false,
    hideHawaiiAndAlaska: true
  },
  data: {
        IL: {
            fillKey: 'maroon'
        },
        WI: {
            fillKey: 'maroon'
        },
        MI: {
            fillKey: 'maroon'
        },
        IN: {
            fillKey: 'maroon'
        },
        OH: {
            fillKey: 'maroon'
        },
        KY: {
            fillKey: 'maroon'
        },
        MO: {
            fillKey: 'maroon'
        },
        IA: {
            fillKey: 'maroon'
        },
        MN: {
            fillKey: 'maroon'
        },
        KS: {
            fillKey: 'maroon'
        },
        NE: {
            fillKey: 'maroon'
        },
        SD: {
            fillKey: 'maroon'
        },
        ND: {
            fillKey: 'maroon'
        },
        PA: {
            fillKey: 'maroon'
        }
    },
  bubblesConfig: {
    fillOpacity: .9,
    borderWidth: 2,
  },
  fills: {
    defaultFill: '#ABDDA4',
    red: 'red',
    green: 'green',
    blue: 'blue',
    yellow: 'yellow',
    magenta: 'magenta',
    purple: 'purple',
    maroon: '#cb5555'
  }
});
window.addEventListener('resize', function() {
  map.resize();
});
map.bubbles(data_all,{
  popupTemplate: function(geo, data) {
    if (data.includes != 0){
    return ['<div class="hoverinfo"><strong><i>' +  data.city +
    '</i></strong><br/><strong>Includes:</strong> ' +  data.includes +
    '<br/><strong>Overall Rank:</strong> ' +  data.overall_rankings +
    '<br/><strong>Startup Activity:</strong> ' +  data.startup +
    '<br/><strong>Access to Resources:</strong> ' +  data.resources +
    '<br/><strong>Demographics:</strong> ' +  data.demographics +
    '</div>'].join('');
}else {
      return ['<div class="hoverinfo"><strong><i>' +  data.city +
    '</i></strong>'+
    '<br/><strong>Overall Rank:</strong> ' +  data.overall_rankings +
    '<br/><strong>Startup Activity:</strong> ' +  data.startup +
    '<br/><strong>Access to Resources:</strong> ' +  data.resources +
    '<br/><strong>Economics & Demographics:</strong> ' +  data.demographics +
    '</div>'].join('');
}

  }});
map.labels({fontFamily: 'Oxygen', fontSize: 9});
