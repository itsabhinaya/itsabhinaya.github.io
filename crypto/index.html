<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta http-equiv="Content-Type" content="text/html;">
	<title>Companies that Accept Cryptocurrency</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" type="text/javascript">
	</script>
	 <link rel="stylesheet" href="style.css">


</head>

<body>
	<div class="container">
		<div class="row">
			<div class="col">
				<h1 class="display-1 text-left"><strong>Does</strong></h1>
			</div>
		</div>		
		<div class="row no-gutter">
				<h2 class="text-left"> <input type="text" class="name" placeholder="apple" value="Overstock" autocomplete="on"/></h2>
			</div>
		<div class="row">
				<div class="col">
				<h2 class="text-left">accept cryptocurrency?</h2>
			</div>
		</div>
		<div class="row">
			<div class="col-6">
				<p class="text-center"><input type="button" class="submit-btn" value="Find here."></p>
			</div>
		</div>
		<div class="row">
			<div class="col">
				<div class="text-left" id="wrap"> </div>
			</div>
		</div>
	</div>

<script type="text/javascript">

$(document).ready(function() {
  $.ajax({
    type: "GET",
    url: "crypto.csv",
    dataType: "text/csv",
    success: function(data) {processData(data);}
 });
});

var a = [];
function processData(myTxt) {
    var myLines = myTxt.split(/\r\n|\n/);
    for (var i=1; i<myLines.length; i++) {
          a.push(myLines[i]);
        }
        console.log(a);
        $( "#name" ).autocomplete({
            source: a
        });
};

$(".submit-btn").click(function(){
	event.preventDefault();
	var nameValue = $("input.name").val().toLowerCase();
	 $.get('crypto.csv', function(data) {
		var build = '';
		var type = '';
		var check = 0;
		var rows = data.split("\n");

		rows.forEach( function getvalues(thisRow) {

		var columns = thisRow.split(",");
		if (nameValue == columns[0].toLowerCase()) {
			type = columns[3].toLowerCase();
			check = 1;
		}})
		$('#wrap').html(" "); //clears the div
		if (check == 1){
			build = "<h1>" + nameValue.charAt(0).toUpperCase() + nameValue.slice(1) +" "+" accepts "+" "+ type.charAt(0).toUpperCase() + type.slice(1) + "."+ "</h1>";
			$('#wrap').append(build);	
		}else{
			build = "<h1>" +nameValue.charAt(0).toUpperCase() + nameValue.slice(1)+" "+" doesn't accept any cryptocurrency." + "</h1>";
			build += "<h6>Let us know if they do accept cryptocurrency curreny here.</h6>"
			$('#wrap').append(build);	
		}
	 });
});
</script>

</body>
</html>